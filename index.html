<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHubéŸ³ä¹æ’­æ”¾å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .player {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .song-info {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.2em;
            min-height: 25px;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .progress-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            height: 8px;
            cursor: pointer;
            margin: 15px 0;
        }

        .progress-bar {
            height: 100%;
            background: #4CAF50;
            border-radius: 5px;
            width: 0%;
            transition: width 0.1s linear;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .volume-slider {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }

        .playlist {
            max-height: 400px;
            overflow-y: auto;
        }

        .playlist-item {
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .playlist-item.active {
            background: rgba(76, 175, 80, 0.3);
            border-left: 4px solid #4CAF50;
        }

        .loading {
            text-align: center;
            padding: 20px;
            font-size: 1.2em;
        }

        .error {
            color: #ff6b6b;
            text-align: center;
            padding: 20px;
        }

        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .controls {
                flex-direction: column;
                gap: 10px;
            }
            
            button {
                width: 100%;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸµ GitHub éŸ³ä¹æ’­æ”¾å™¨</h1>
        
        <div class="player">
            <div class="song-info" id="songInfo">è¯·é€‰æ‹©ä¸€é¦–æ­Œæ›²</div>
            
            <div class="controls">
                <button id="prevBtn" title="ä¸Šä¸€é¦–">â®ï¸ ä¸Šä¸€é¦–</button>
                <button id="playBtn" title="æ’­æ”¾/æš‚åœ">â–¶ï¸ æ’­æ”¾</button>
                <button id="nextBtn" title="ä¸‹ä¸€é¦–">â­ï¸ ä¸‹ä¸€é¦–</button>
            </div>
            
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="volume-container">
                <span>ğŸ”Š</span>
                <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.01" value="0.7">
            </div>
        </div>
        
        <div class="playlist" id="playlist">
            <div class="loading">åŠ è½½éŸ³ä¹åˆ—è¡¨ä¸­...</div>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
        class MusicPlayer {
            constructor() {
                this.audio = document.getElementById('audioPlayer');
                this.playBtn = document.getElementById('playBtn');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.progressBar = document.getElementById('progressBar');
                this.progressContainer = document.getElementById('progressContainer');
                this.volumeSlider = document.getElementById('volumeSlider');
                this.songInfo = document.getElementById('songInfo');
                this.playlist = document.getElementById('playlist');
                
                this.songs = [];
                this.currentSongIndex = -1;
                
                this.init();
            }
            
            async init() {
                await this.loadSongs();
                this.setupEventListeners();
                this.updatePlaylist();
            }
            
            async loadSongs() {
                try {
                    // GitHubä»“åº“é…ç½® - è¯·æ ¹æ®å®é™…ä»“åº“ä¿®æ”¹
                    const owner = 'zhufacai'; // æ›¿æ¢ä¸ºä½ çš„GitHubç”¨æˆ·å
                    const repo = 'ceshi'; // æ›¿æ¢ä¸ºä½ çš„éŸ³ä¹ä»“åº“å
                    const path = '/'; // æ›¿æ¢ä¸ºä½ çš„éŸ³ä¹æ–‡ä»¶å¤¹è·¯å¾„
                    
                    // ä¸ºäº†æ¼”ç¤ºç›®çš„ï¼Œè¿™é‡Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                    // åœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œä½ éœ€è¦æ›¿æ¢ä¸ºçœŸå®çš„GitHub APIè°ƒç”¨
                    this.songs = [
                        { name: "sample1.mp3", download_url: "https://example.com/music/sample1.mp3", size: 3456789 },
                        { name: "sample2.mp3", download_url: "https://example.com/music/sample2.mp3", size: 4567890 },
                        { name: "sample3.mp3", download_url: "https://example.com/music/sample3.mp3", size: 2345678 }
                    ];
                    
                    // å®é™…çš„GitHub APIè°ƒç”¨ä»£ç å¦‚ä¸‹ï¼š
                    /*
                    const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`);
                    const data = await response.json();
                    
                    this.songs = data
                        .filter(item => item.type === 'file' && this.isAudioFile(item.name))
                        .map(item => ({
                            name: item.name,
                            download_url: item.download_url,
                            size: item.size
                        }));
                    */
                    
                } catch (error) {
                    console.error('åŠ è½½éŸ³ä¹åˆ—è¡¨å¤±è´¥:', error);
                    this.playlist.innerHTML = `<div class="error">åŠ è½½éŸ³ä¹åˆ—è¡¨å¤±è´¥: ${error.message}</div>`;
                }
            }
            
            isAudioFile(filename) {
                const audioExtensions = ['.mp3', '.wav', '.ogg', '.m4a', '.flac'];
                return audioExtensions.some(ext => filename.toLowerCase().endsWith(ext));
            }
            
            setupEventListeners() {
                this.playBtn.addEventListener('click', () => this.togglePlay());
                this.prevBtn.addEventListener('click', () => this.playPrevious());
                this.nextBtn.addEventListener('click', () => this.playNext());
                this.progressContainer.addEventListener('click', (e) => this.seek(e));
                this.volumeSlider.addEventListener('input', () => this.setVolume());
                this.audio.addEventListener('timeupdate', () => this.updateProgress());
                this.audio.addEventListener('ended', () => this.playNext());
                this.audio.addEventListener('loadedmetadata', () => this.updateSongInfo());
            }
            
            togglePlay() {
                if (this.currentSongIndex === -1 && this.songs.length > 0) {
                    this.currentSongIndex = 0;
                    this.loadSong();
                }
                
                if (this.audio.paused) {
                    this.audio.play();
                    this.playBtn.textContent = 'â¸ï¸ æš‚åœ';
                } else {
                    this.audio.pause();
                    this.playBtn.textContent = 'â–¶ï¸ æ’­æ”¾';
                }
            }
            
            playPrevious() {
                if (this.songs.length === 0) return;
                
                this.currentSongIndex = (this.currentSongIndex - 1 + this.songs.length) % this.songs.length;
                this.loadSong();
                if (!this.audio.paused) {
                    this.audio.play();
                }
            }
            
            playNext() {
                if (this.songs.length === 0) return;
                
                this.currentSongIndex = (this.currentSongIndex + 1) % this.songs.length;
                this.loadSong();
                if (!this.audio.paused) {
                    this.audio.play();
                }
            }
            
            loadSong() {
                if (this.currentSongIndex === -1 || this.currentSongIndex >= this.songs.length) return;
                
                const song = this.songs[this.currentSongIndex];
                this.audio.src = song.download_url;
                this.updateSongInfo();
                this.updatePlaylist();
            }
            
            updateSongInfo() {
                if (this.currentSongIndex !== -1) {
                    const song = this.songs[this.currentSongIndex];
                    this.songInfo.textContent = `æ­£åœ¨æ’­æ”¾: ${song.name}`;
                }
            }
            
            updatePlaylist() {
                if (this.songs.length === 0) {
                    this.playlist.innerHTML = '<div class="loading">æ²¡æœ‰æ‰¾åˆ°éŸ³ä¹æ–‡ä»¶</div>';
                    return;
                }
                
                this.playlist.innerHTML = this.songs.map((song, index) => `
                    <div class="playlist-item ${index === this.currentSongIndex ? 'active' : ''}" 
                         onclick="musicPlayer.selectSong(${index})">
                        <div><strong>${song.name}</strong></div>
                        <div style="font-size: 0.9em; opacity: 0.7;">${this.formatFileSize(song.size)}</div>
                    </div>
                `).join('');
            }
            
            selectSong(index) {
                this.currentSongIndex = index;
                this.loadSong();
                if (this.audio.paused) {
                    this.audio.play();
                    this.playBtn.textContent = 'â¸ï¸ æš‚åœ';
                }
            }
            
            updateProgress() {
                const percent = (this.audio.currentTime / this.audio.duration) * 100;
                this.progressBar.style.width = `${percent || 0}%`;
            }
            
            seek(e) {
                const width = this.progressContainer.clientWidth;
                const clickX = e.offsetX;
                const duration = this.audio.duration;
                
                this.audio.currentTime = (clickX / width) * duration;
            }
            
            setVolume() {
                this.audio.volume = this.volumeSlider.value;
            }
            
            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
        }
        
        // åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨
        const musicPlayer = new MusicPlayer();
        
        // ä¸ºäº†æ¼”ç¤ºç›®çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
        // åœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œä½ éœ€è¦é…ç½®çœŸå®çš„GitHubä»“åº“ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', () => {
            // è¿™é‡Œå¯ä»¥æ·»åŠ é¢å¤–çš„åˆå§‹åŒ–é€»è¾‘
        });
    </script>
</body>
</html>
